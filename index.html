<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ご予約 | 旅館 黄昏の澱</title>
<style>
body{margin:0;font-family:"Hiragino Mincho ProN",serif;background:#f7f7f7;color:#333;}
header{background:#ffffff;padding:20px;text-align:center;border-bottom:1px solid #ddd;}
h1{margin:0;font-size:24px;}
main{max-width:600px;margin:40px auto;padding:20px;background:#ffffff;border:1px solid #ddd;border-radius:6px;}
label{display:block;margin-top:15px;font-size:14px;}
input,select,textarea{width:100%;padding:8px;margin-top:5px;border:1px solid #ccc;border-radius:4px;font-size:14px;}
button{margin-top:20px;padding:10px;width:100%;background:#4a6fa5;border:none;color:#fff;cursor:pointer;border-radius:4px;font-size:15px;}
button:hover{background:#3b5c8a;}
footer{text-align:center;margin:40px 0 20px;font-size:12px;color:#666;}
.notice{margin-top:10px;font-size:12px;color:#777;}
.hidden{display:none;}
</style>
</head>
<body>

<header>
<h1>旅館 黄昏の澱　ご予約フォーム</h1>
</header>

<main>
<form id="reservationForm" action="https://formspree.io/f/your-form-id" method="POST">

<label>お名前
<input type="text" name="name" required>
</label>

<label>メールアドレス
<input type="email" name="email" required>
</label>

<label>ご宿泊日
<input type="date" name="date" required>
</label>

<label>ご希望のお部屋
<select name="room" id="roomSelect" required>
<option value="">選択してください</option>
<option value="tsuki">月影の間</option>
<option value="kaze">風渡りの間</option>
<option value="mori">森囁きの間</option>
<option value="yami">宵闇の間</option>
<option value="shizuku">雫の間</option>
<option value="kioku">記憶の間</option>
</select>
</label>

<div id="extraNote" class="hidden">
<label>※特別なお部屋をご選択いただきました。確認事項をご入力ください。
<textarea name="special_note" rows="3"></textarea>
</label>
</div>

<label>ご要望
<textarea name="message" rows="4"></textarea>
</label>

<button type="submit">予約を送信する</button>

<p class="notice">※送信後、自動返信メールが届きます。</p>

</form>
</main>

<footer>
© 旅館 黄昏の澱
</footer>

<script>
const form = document.getElementById('reservationForm');
const roomSelect = document.getElementById('roomSelect');
const extraNote = document.getElementById('extraNote');

// 特定の部屋で挙動を変える
roomSelect.addEventListener('change', function() {
  if (roomSelect.value === 'kioku' || roomSelect.value === 'yami') {
    extraNote.classList.remove('hidden');
  } else {
    extraNote.classList.add('hidden');
  }
});

// 送信後の遷移処理
form.addEventListener('submit', async function(e) {
  e.preventDefault();
  const data = new FormData(form);

  const response = await fetch(form.action, {
    method: form.method,
    body: data,
    headers: { 'Accept': 'application/json' }
  });

  if (response.ok) {
    // 通常は健全な完了ページへ
    if (roomSelect.value === 'kioku') {
      window.location.href = 'complete_special.html';
    } else {
      window.location.href = 'complete.html';
    }
  } else {
    alert('送信に失敗しました。もう一度お試しください。');
  }
});
</script>

</body>
</html>
